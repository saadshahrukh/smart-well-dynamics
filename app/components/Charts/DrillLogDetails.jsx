import React, { useEffect, useRef } from "react";
import * as echarts from "echarts";

const DrillLogDetails = () => {
  const chartRef = useRef(null);

  useEffect(() => {
    if (!chartRef.current) return;

    const chartInstance = echarts.init(chartRef.current);

    const option = {
      title: {
        text: "SMARTS QC Analysis",
        subtext:
          "Drilling Logs Detail: Measured Depth, Inclination, Azimuth, Dip, BTotal and TVD\nwww.smartwelldynamics.com",
        left: "right",
        textStyle: {
          fontSize: 16,
          fontWeight: "bold",
        },
        subtextStyle: {
          fontSize: 12,
        },
      },
      tooltip: {
        trigger: "axis",
        axisPointer: { animation: false },
      },
      legend: {
        data: ["TVD", "Northing", "Azimuth", "DIP", "Inclination", "BTotal"],
        left: "left",
      },
      toolbox: {
        show: true,
        orient: "vertical",
        left: "right",
        top: "80",
        feature: {
          magicType: {
            show: true,
            type: ["line", "bar"],
            title: { line: "Line", bar: "Bar" },
          },
          restore: { show: true },
        },
      },
      axisPointer: {
        link: { xAxisIndex: "all" },
      },
      dataZoom: [
        { show: true, realtime: true, start: 0, xAxisIndex: [0, 1], top: 660 },
        { type: "inside", realtime: true, start: 0, xAxisIndex: [0, 1] },
      ],
      grid: [
        { left: 80, right: 80, height: "30%", top: "15%" },
        { left: 65, right: 100, top: "55%", height: "35%" },
      ],
      xAxis: [
        {
          type: "category",
          boundaryGap: false,
          axisLine: { onZero: true },
          axisTick: {
            alignWithLabel: true,
          },
          axisPointer: {
            label: {
              formatter: (params) => `Measured Depth: ${params.value}`,
            },
          },
          data: [
            30.54, 60.72, 90.58, 120.9, 150.56, 180.49, 210.06, 240.55, 270.66,
            300.63, 330.85, 360.2, 390.38, 420.08, 450.7, 480.31, 510.44,
            540.63, 570.24, 600.66, 630.61, 660.69, 690.99, 720.21, 750.02,
            780.56, 810.53, 840.31, 870.63, 900.67, 930.52, 960.13, 990.01,
            1020.87, 1050.81, 1080.26, 1110.29, 1140.91, 1170.07, 1200.84,
            1230.48, 1260.88, 1290.31, 1320.11, 1350.01, 1380.61, 1411.0,
            1440.14, 1470.42, 1500.3, 1530.73, 1560.41, 1590.0, 1620.23,
            1650.65, 1680.82, 1710.74, 1740.37, 1770.07, 1800.15, 1830.79,
            1860.03, 1890.13, 1920.08, 1950.64, 1980.67, 2010.39, 2040.36,
            2070.89, 2100.36, 2130.31, 2160.59, 2190.31, 2220.44, 2250.42,
          ],
        },
        {
          gridIndex: 1,
          type: "category",
          boundaryGap: false,
          axisLine: { onZero: true },
          axisTick: {
            alignWithLabel: true,
          },
          data: [
            30.54, 60.72, 90.58, 120.9, 150.56, 180.49, 210.06, 240.55, 270.66,
            300.63, 330.85, 360.2, 390.38, 420.08, 450.7, 480.31, 510.44,
            540.63, 570.24, 600.66, 630.61, 660.69, 690.99, 720.21, 750.02,
            780.56, 810.53, 840.31, 870.63, 900.67, 930.52, 960.13, 990.01,
            1020.87, 1050.81, 1080.26, 1110.29, 1140.91, 1170.07, 1200.84,
            1230.48, 1260.88, 1290.31, 1320.11, 1350.01, 1380.61, 1411.0,
            1440.14, 1470.42, 1500.3, 1530.73, 1560.41, 1590.0, 1620.23,
            1650.65, 1680.82, 1710.74, 1740.37, 1770.07, 1800.15, 1830.79,
            1860.03, 1890.13, 1920.08, 1950.64, 1980.67, 2010.39, 2040.36,
            2070.89, 2100.36, 2130.31, 2160.59, 2190.31, 2220.44, 2250.42,
          ],
          axisPointer: {
            label: {
              formatter: (params) => `Measured Depth: ${params.value}`,
            },
          },
        },
      ],
      yAxis: [
        {
          name: "TVD / Northing",
          type: "value",
          inverse: true,
          nameLocation: "middle",
          nameTextStyle: {
            align: "middle",
            verticalAlign: "bottom",
            padding: [25, 25, 40, 25],
          },
        },
        {
          gridIndex: 1,
          name: "Inclination / Azimuth / Dip",
          type: "value",
          nameLocation: "middle",
          axisLine: { show: true },
          axisTick: { show: true },
          nameTextStyle: {
            align: "middle",
            verticalAlign: "bottom",
            padding: [25, 25, 25, 25],
          },
        },
        {
          gridIndex: 1,
          name: "BTotal",
          type: "value",
          position: "right",
          min: "dataMin",
          nameLocation: "middle",
          axisLine: { show: true },
          axisTick: { show: true },
          nameTextStyle: {
            align: "center",
            verticalAlign: "middle",
            padding: [40, 0, 0, 25],
          },
        },
      ],
      series: [
        {
          name: "TVD",
          type: "line",
          symbolSize: 6,
          yAxisIndex: 0,
          data: [
            0.0, 30.17, 59.97, 90.13, 119.5, 148.94, 177.76, 207.11, 235.69,
            263.65, 291.34, 317.71, 344.23, 369.66, 395.07, 418.88, 442.28,
            464.8, 486.07, 507.01, 526.54, 545.07, 562.62, 578.5, 593.69,
            608.09, 620.98, 632.51, 643.13, 652.45, 660.38, 666.9, 672.1,
            676.02, 678.54, 679.81, 680.3, 680.42, 680.46, 680.49, 680.63,
            680.79, 680.94, 680.94, 680.85, 680.66, 680.63, 680.66, 680.55,
            680.48, 680.43, 680.28, 680.28, 680.5, 680.65, 680.63, 680.45,
            680.38, 680.35, 680.29, 680.37, 680.49, 680.46, 680.48, 680.49,
            680.42, 680.49, 680.49, 680.49, 680.45, 680.26, 680.12, 680.08,
            680.07, 680.12,
          ],
        },
        {
          name: "Northing",
          type: "line",
          symbolSize: 6,
          yAxisIndex: 0,
          data: [
            0.0, 0.58, 2.28, 5.18, 9.08, 14.13, 20.33, 28.11, 37.02, 47.15,
            58.53, 70.62, 84.17, 98.64, 114.72, 131.24, 149.09, 168.02, 187.37,
            208.07, 229.43, 251.74, 274.91, 297.89, 321.94, 347.24, 372.71,
            398.54, 425.26, 452.16, 479.27, 506.42, 534.09, 562.92, 590.97,
            618.56, 646.83, 675.56, 702.91, 731.78, 759.63, 788.25, 815.95,
            844.01, 872.13, 900.86, 929.34, 956.67, 985.07, 1013.08, 1041.68,
            1069.56, 1097.3, 1125.72, 1154.38, 1182.81, 1210.94, 1238.73,
            1266.61, 1294.83, 1323.59, 1351.04, 1379.34, 1407.54, 1436.3,
            1464.5, 1492.43, 1520.62, 1549.28, 1577.0, 1605.2, 1633.67, 1661.58,
            1689.86, 1718.05,
          ],
        },
        {
          name: "Azimuth",
          type: "line",
          xAxisIndex: 1,
          yAxisIndex: 1,
          symbolSize: 8,
          data: [
            341.32, 19.39, 20.05, 19.55, 20.91, 19.23, 20.62, 19.05, 20.23,
            19.16, 20.95, 19.45, 20.01, 19.09, 20.16, 19.8, 20.11, 19.25, 20.81,
            19.62, 20.02, 19.45, 20.99, 19.77, 20.86, 19.18, 20.25, 19.44, 20.1,
            19.02, 20.21, 19.62, 20.13, 19.18, 20.64, 19.95, 19.45, 20.98,
            19.55, 20.92, 19.06, 20.42, 19.07, 20.32, 19.32, 20.93, 19.96,
            20.63, 19.98, 20.71, 19.24, 20.87, 19.8, 20.09, 19.04, 20.06, 19.85,
            20.57, 19.86, 20.54, 19.84, 20.43, 19.39, 20.08, 19.37, 20.91,
            19.04, 20.6, 19.7, 20.0, 19.33, 20.49, 19.67, 20.72, 19.04,
          ],
        },
        {
          name: "DIP",
          type: "line",
          xAxisIndex: 1,
          yAxisIndex: 1,
          symbolSize: 8,
          data: [
            77.04, 77.08, 77.05, 77.01, 77.01, 77.08, 77.08, 77.06, 77.05, 77.0,
            77.09, 77.01, 77.06, 77.1, 77.07, 77.05, 77.01, 77.07, 77.01, 77.07,
            77.03, 77.01, 77.06, 77.06, 77.06, 77.02, 77.03, 77.05, 77.07,
            77.05, 77.01, 77.04, 77.04, 77.01, 77.07, 77.08, 76.96, 77.05,
            76.96, 77.06, 76.92, 77.06, 76.95, 77.06, 76.96, 77.03, 76.91,
            77.06, 76.95, 77.07, 76.93, 77.02, 76.98, 77.0, 76.92, 77.01, 76.99,
            77.07, 76.91, 77.07, 76.99, 77.06, 76.96, 77.0, 76.99, 77.07, 76.96,
            77.06, 76.95, 77.03, 77.0, 77.02, 76.99, 77.06, 76.99,
          ],
        },
        {
          name: "Inclination",
          type: "line",
          xAxisIndex: 1,
          yAxisIndex: 1,
          symbolSize: 8,
          data: [
            0.15, 2.18, 4.76, 6.92, 9.23, 11.44, 14.36, 17.1, 19.56, 22.53,
            24.75, 27.29, 29.71, 32.52, 35.29, 37.57, 40.54, 42.97, 45.2, 47.82,
            50.79, 53.14, 56.07, 58.07, 60.66, 63.07, 66.0, 68.42, 70.57, 73.26,
            75.94, 78.63, 81.33, 84.05, 86.33, 88.7, 89.44, 90.12, 89.71, 90.17,
            89.29, 90.12, 89.29, 90.67, 89.7, 90.99, 89.13, 90.75, 89.69, 90.55,
            89.65, 90.94, 89.05, 90.12, 89.34, 90.74, 89.94, 90.32, 89.81,
            90.41, 89.31, 90.2, 89.93, 90.0, 89.94, 90.33, 89.41, 90.58, 89.39,
            90.78, 89.96, 90.58, 89.56, 90.49, 89.31,
          ],
        },
        {
          name: "BTotal",
          type: "line",
          xAxisIndex: 1,
          yAxisIndex: 2,
          symbolSize: 8,
          data: [
            59238.0, 59200.0, 59433.0, 59262.0, 59341.0, 59382.0, 59251.0,
            59295.0, 59331.0, 59226.0, 59306.0, 59227.0, 59293.0, 59399.0,
            59235.0, 59419.0, 59224.0, 59316.0, 59386.0, 59215.0, 59310.0,
            59436.0, 59316.0, 59298.0, 59408.0, 59303.0, 59352.0, 59365.0,
            59358.0, 59294.0, 59470.0, 59463.0, 59228.0, 59464.0, 59299.0,
            59356.0, 59555.0, 59736.0, 59502.0, 59516.0, 59683.0, 59798.0,
            59486.0, 59822.0, 59751.0, 59668.0, 59809.0, 59789.0, 59836.0,
            59566.0, 59749.0, 59533.0, 59521.0, 59530.0, 59498.0, 59542.0,
            59831.0, 59497.0, 59706.0, 59729.0, 59434.0, 59671.0, 59441.0,
            59618.0, 59469.0, 59517.0, 59725.0, 59443.0, 59631.0, 59417.0,
            59721.0, 59772.0, 59699.0, 59591.0, 59609.0,
          ],
        },
      ],
    };

    chartInstance.setOption(option);

    return () => {
      chartInstance.dispose();
    };
  }, []);

  return (
    <div className="w-full bg-white shadow-lg p-4 rounded-lg">
      <div ref={chartRef} className="w-full h-[700px]"></div>
    </div>
  );
};

export default DrillLogDetails;
